<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="css/index.css">
    <link rel="stylesheet" href="css/reasyui.css">
    <script src="js/libs/jquery-1.11.2.js"></script>
</head>
<style>
    .channel-top li{
        float: left;
        padding: 0 12px 6px;
        list-style: none;
    }
    .channel-left{
        border: 2px solid #ccc;
        float: left;
    }
    .channel td{
        width: 50px;
        height: 30px;
        border-top:5px solid white;
        border-bottom:5px solid white;
    }
    .channel-min, .channel-right{
        height: 490px;
        float: left;
        margin-left:5px;
        border: 2px solid #ccc;
        background: #ccc;
    }
    .channel-min td{
        height: 30px;
        border-top:5px solid #ccc;
        border-bottom:5px solid #ccc;
    }
    .channel-right-top td, .channel-right-center td{
        height: 20px;
        width: 28px;
        border: 2px solid black;
    }
    .channel-right-bottom td{
        height: 20px;
        width: 33px;
        border: 2px solid black;
    }
    .channel-right-top,.channel-right-bottom{
        border: 1px solid #707070;
    }
   .channel-right-top-bottom, .channel-right-bottom{
        margin-top: 5px;
    }
</style>
<script>
    //设置行，列
    var cols=13; //11列
    var rows=16; //16行
    var htmlstr="<tr>";
    for(var i=0;i<rows;i++){
        if (i<10) {
            i = "0" +i;
        }
        for(var j=0;j<cols;j++){
            if (j<10) {
                j = "0" +j;
            }
            htmlstr+="<td id="+"p"+i+j+"></td>";
        }
        htmlstr+="</tr>";
    }
    document.getElementById('phase1').innerHTML = htmlstr;
    function fillDatas(rect_data) {
        $.each(rect_data[0],function(key,item){
            switch (item)
            {
                case 0:
                    document.getElementById(key).style.background = "#f00";
                    break;
                case 1:
                    document.getElementById(key).style.background = "#0f0";
                    // document.getElementById(key).style.background = "-moz-linear-gradient(left,#ccc,#0f0)";
                    break;
                case 2:
                    document.getElementById(key).style.background = "#ff0";
                    break;
            }
        })
    }
    var fun = function() {
        $.ajax({
            type: "get",
            url: "http://localhost:3003/test1",
            contentType: 'application/json',
            dataType: "json",
            success:function(data){
                fillDatas(data);
            },
            error:function(){
                alert("加载资源失败");
            }
        });
    };
    setInterval(fun,1000);
</script>
<body>
<section class="container-fluid">
    <form class="form-horizontal">
        <h2 class="legend">信号机状态</h2>
        <fieldset>
            <ul class="channel-top">
                <li><input type="button" value="GPS对时"></li>
                <li><input type="button" value="中心对时"></li>
                <li><input type="button" value="NC"></li>
                <li><input type="button" value="方案同步"></li>
                <li><input type="button" value="GPS正常"></li>
                <li><input type="button" value="信号机开灯"></li>
                <li><input type="button" value="信号机故障"></li>
                <li><input type="button" value="信号机告警"></li>
            </ul>
        </fieldset>
    </form>
    <form class="form-horizontal">
        <h2 class="legend">相位状态</h2>
        <fieldset>
            <div class="channel-left">
                <table class="channel">
                    <tbody id="phase1"></tbody>
                </table>
            </div>
            <div class="channel-min">
                <table>
                    <tbody>
                        <tr>
                            <td>A:南</td>
                        </tr>
                        <tr>
                            <td>B:北</td>
                        </tr>
                        <tr>
                            <td>C:东</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="channel-right">
                <div class="channel-right-top">
                    <div class="channel-right-top-top">
                        <h5>路口状态</h5>
                        <table>
                            <tbody>
                            <tr>
                                <td></td>
                                <td>模式</td>
                                <td>阶段</td>
                                <td>方案</td>
                                <td>协调</td>
                            </tr>
                            <tr>
                                <td>0</td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>1</td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>3</td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="channel-right-top-bottom">
                        <table>
                            <tbody>
                            <tr>
                                <td>开始</td>
                                <td>阶段</td>
                                <td>时长</td>
                                <td>间隔</td>
                                <td>周期</td>
                            </tr>
                            </tbody>
                        </table>
                        <div style="height: 60px;"></div>
                    </div>
                </div>
                <div class="channel-right-bottom">
                    <h5>检测器</h5>
                    <table>
                        <tbody>
                        <tr>
                            <td>路口</td>
                            <td>状态</td>
                            <td>流量</td>
                            <td>占有率</td>
                        </tr>
                        <tr>
                            <td>0</td>
                            <td></td>
                            <td></td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>1</td>
                            <td></td>
                            <td></td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td></td>
                            <td></td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td></td>
                            <td></td>
                            <td></td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </fieldset>
    </form>
</section>
</body>
</html>