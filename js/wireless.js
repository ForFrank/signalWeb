define(function(require,exports,module){function update(){var obj=arguments[0];$("#wifiChannelCurrent").text(obj.wifi.wifiChannelCurrent),$("#wifiBandwidthCurrent").text(""==obj.wifi.wifiBandwidthCurrent?"":obj.wifi.wifiBandwidthCurrent+"MHz")}function pageModuleInit(){this.initValue=function(){var type=pageModule.data.wifiRelayType;"ap"!==type?($("#optionWrap").hide(),$("#wifiParamWrap").addClass("none")):($("#wifiParamWrap").removeClass("none"),$("#optionWrap").show())}}function WifiSsidModule(){function changeWifiEn(){$("#wifiEn").hasClass("icon-toggle-off")?($("#wifiWrap").show(),$("#wifiEn").removeClass("icon-toggle-off").addClass("icon-toggle-on")):($("#wifiWrap").hide(),$("#wifiEn").removeClass("icon-toggle-on").addClass("icon-toggle-off")),top.mainLogic.initModuleHeight()}function changeSecurityMode(){var securityMode=$("#wifiSecurityMode").val();"none"!=securityMode?$("#wifiPwd").parent().parent().removeClass("none"):$("#wifiPwd").parent().parent().addClass("none"),"wpa-psk"!=securityMode?$("#wps").show():$("#wps").hide(),top.mainLogic.initModuleHeight()}this.init=function(){this.initEvent()},this.initEvent=function(){this.addInputEvent=!1,$("#wifiEn").on("click",changeWifiEn),$("#wifiSecurityMode").on("change",changeSecurityMode),$("#helpTips").on("mouseover",function(){$("#hideSSIDTips").show()}),$("#helpTips").on("mouseout",function(){$("#hideSSIDTips").hide()})},this.initValue=function(){var obj=pageModule.data;inputValue(obj),this.addInputEvent||($("#wifiSSID").addPlaceholder(_("WiFi Name")),$("#wifiPwd").initPassword(_("WiFi Password")),this.addInputEvent=!0),$("#wifiEn").html(""),"true"==obj.wifiEn?($("#wifiWrap").show(),$("#wifiEn").removeClass("icon-toggle-off").addClass("icon-toggle-on")):($("#wifiWrap").hide(),$("#wifiEn").removeClass("icon-toggle-on").addClass("icon-toggle-off")),changeSecurityMode()},this.getSubmitData=function(){var data={wifiEn:$("#wifiEn").hasClass("icon-toggle-on")||"false",wifiSSID:$("#wifiSSID").val(),wifiSecurityMode:$("#wifiSecurityMode").val(),wifiPwd:$("#wifiPwd").val(),wifiHideSSID:$("#wifiHideSSID:checked").val()||"false"};return objToString(data)}}function WifiPowerModule(){this.initValue=function(){$("[name='wifiPower'][value='"+pageModule.data.wifiPower+"']")[0].checked=!0},this.getSubmitData=function(){var data={wifiPower:$("input[name='wifiPower']:checked").val()||"low"};return objToString(data)}}function WifiScheduleModule(){function changeWifiTimeEn(){$("input[name='wifiTimeEn']")[0].checked?$("#wifiScheduleWrap").show():$("#wifiScheduleWrap").hide(),top.mainLogic.initModuleHeight()}function getScheduleDate(){var i=0,len=8,str="";for(i=0;len>i;i++)str+=$("#day"+i)[0].checked?"1":"0";return str}function clickTimeDay(){var dataStr=getScheduleDate();translateDate("day0"==this.id?this.checked?"11111111":"00000000":"1111111"==dataStr.slice(1)?"11111111":"0"+dataStr.slice(1))}function translateDate(str){var dayArry=str.split(""),len=dayArry.length,i=0;for(i=0;len>i;i++)$("#day"+i)[0].checked=1==dayArry[i]}var oldDate;this.init=function(){this.initHtml(),this.initEvent()},this.initHtml=function(){var hourStr="",minStr="",i=0;for(i=0;24>i;i++)hourStr+="<option value='"+("100"+i).slice(-2)+"'>"+("100"+i).slice(-2)+"</option>";for($("#startHour, #endHour").html(hourStr),i=0;60>i;i++)i%5===0&&(minStr+="<option value='"+("100"+i).slice(-2)+"'>"+("100"+i).slice(-2)+"</option>");$("#startMin, #endMin").html(minStr)},this.initEvent=function(){$("input[name='wifiTimeEn']").on("click",changeWifiTimeEn),$("[id^=day]").on("click",clickTimeDay)},this.initValue=function(){var obj=pageModule.data;inputValue(obj.wifiTime),translateDate(obj.wifiTime.wifiTimeDate),oldDate=obj.wifiTime.wifiTimeDate;var time=obj.wifiTime.wifiTimeClose.split("-");$("#startHour").val(time[0].split(":")[0]),$("#startMin").val(time[0].split(":")[1]),$("#endHour").val(time[1].split(":")[0]),$("#endMin").val(time[1].split(":")[1]),changeWifiTimeEn()},this.checkData=function(){if($("[name='wifiTimeEn']")[0].checked){var date=getScheduleDate();if("00000000"==date)return _("Select one day at least.")}},this.getSubmitData=function(){var time=$("#startHour").val()+":"+$("#startMin").val()+"-"+$("#endHour").val()+":"+$("#endMin").val(),data={wifiTimeEn:$("input[name='wifiTimeEn']:checked").val()||"false",wifiTimeClose:time,wifiTimeDate:getScheduleDate()};return objToString(data)}}function WifiParameterModule(){function createChannel(max){var str='<option value="Auto">'+_("Auto")+"</option>";for(i=1;max>=i;i++)str+='<option value="'+i+'">'+_("Channel")+" "+i+" ("+(2407+5*i)+"MHz)</option>";$("#wifiChannel").html(str)}function createPowerView(gear){1==gear?$("#wifiSignal").hide():2==gear&&$("#wifiPowerNormalWrap").hide()}function changeWifiMode(mod){var mode=mod||$("#wifiMode").val();$("#wifiBandwidth").html(-1!==mode.indexOf("n")?'<option value="Auto">'+_("Auto")+'</option><option value="20">20MHz</option><option value="40">40MHz</option>':'<option value="20">20MHz</option>')}this.init=function(){this.initEvent()},this.initEvent=function(){$("#wifiMode").on("change",function(){changeWifiMode()})},this.initValue=function(){var obj=pageModule.data;"true"==obj.wifi.hasWifiAntijam?$("#wifiAntijamWrap").removeClass("none"):$("#wifiAntijamWrap").addClass("none"),obj.wifi.wifiBandwidthCurrent=obj.wifi.wifiBandwidthCurrent+"MHz",createChannel(obj.wifi.wifiMaxChannel),createPowerView(obj.wifiPoweerGear),changeWifiMode(obj.wifi.wifiMode),inputValue(obj.wifi)},this.getSubmitData=function(){var data={wifiMode:$("#wifiMode").val(),wifiChannel:$("#wifiChannel").val(),wifiBandwidth:$("#wifiBandwidth").val(),wifiAntijamEn:$("#wifiAntijamEn:checked").val()||"false"};return objToString(data)}}var pageModule=new PageLogic("goform/getWifi","goform/setWifi");pageModule.modules=[],pageModule.rebootIP=location.host,module.exports=pageModule,pageModule.initEvent=function(){pageModule.update(2e3,update)},pageModule.beforeSubmit=function(){{var wifiPwd=$("#wifiPwd").val(),pwd=pageModule.data.wifiPwd,wifiSecurityMode=$("#wifiSecurityMode").val();pageModule.data.wifiMobileDevice}return pageModule.data.wifiSSID==$("#wifiSSID").val()&&(wifiPwd===pwd||"none"==wifiSecurityMode)||confirm(_("The wireless connection will disconnect, please connect again."))?!0:!1};var pageModuleInit=new pageModuleInit;pageModule.modules.push(pageModuleInit);var wifiSsidModule=new WifiSsidModule;pageModule.modules.push(wifiSsidModule);var wifiPowerModule=new WifiPowerModule;pageModule.modules.push(wifiPowerModule);var wifiScheduleModule=new WifiScheduleModule;pageModule.modules.push(wifiScheduleModule);var wifiParameterModule=new WifiParameterModule;pageModule.modules.push(wifiParameterModule)});